<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.7/p5.js"></script>
<script src="lsystem.js"></script>
<script>

  var system = new LSystem({
    axiom: '0',
    rules: {
      '0': "1[0]0",
      '1': "11"
    },
    renderRules: {
      '0': function () {
        var d = random(0, 1);
        line(0, 0, d, 0);
        translate(d,0);
      },
      '1': function () {
        var d = random(0, 0.5);
        line(0, 0, d, 0);
        translate(d,0);
      },
      '[': function () {
        push();
        rotate(random(0,60));
      },
      ']': function () {
        pop();
        rotate(-1 * random(0, 60));
      }
    }
  });

  function setup() {
    angleMode(DEGREES);
    frameRate(1);
    createCanvas(640, 640);
    background(255);
    stroke(0);
    system.reset();
    system.simulate(11);
    translate(320, 640);
    rotate(-90);
    push();
    push();
  }

  function draw() {
    background(255);
    system.render();
  }

</script>

