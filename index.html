<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.7/p5.js"></script>
<script src="lsystem.js"></script>
<script>

  var angle = 60;
  var d = 20;
  var iter = 6;
  var c;
  var system = new LSystem({
    axiom: 'f',
    rules: {
      'f': "f[+f>][-f]f"
    },
    renderRules: {
      'f': function () {
        stroke(c);
        line(0, 0, d, 0);
        translate(d,0);
      },
      '>': function () {
        c = color((c.hsba[0] + 0.1) % 360, c.hsba[1], c.hsba[2], c.hsba[3]);
      },
      '[': function () {
        push();
      },
      ']': function () {
        pop();
      },
      '+': function () {
        rotate(angle);
      },
      '-': function () {
        rotate(-1 * angle);
      }
    }
  });

  function setup() {
    angleMode(DEGREES);
    colorMode(HSB);
    c = color(180, 80, 80, 1);
    console.log(c);

    frameRate(1);
    createCanvas(1024 * 1.62, 1024);
    background(255);
    /* translate(0, 1024 / 2); */
    translate(1024 * 1.62/ 2, 1024);
    rotate(-90);
    push();
    system.reset();
    system.simulate(iter);
    system.render();
    pop();
  }


</script>

